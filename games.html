---
permalink: /games/
layout: base
game: false
---

<link rel="stylesheet" href="/css/games.css" />

{%- assign game_pages = site.pages | where: "game", true -%}
{%- assign tags = game_pages
    | where_exp: "page", "page.tags"
    | map: "tags" | uniq
-%}
{%- assign tools = game_pages
    | where_exp: "page", "page.tools"
    | map: "tools" | uniq
-%}
{%- assign roles = game_pages
    | where_exp: "page", "page.roles"
    | map: "roles" | uniq
-%}

<h1>Games</h1>
<form>
<fieldset>
    <legend>Search and Filter</legend>
    <label>
        <input
            id="search"
            type="search" name="q"
            placeholder="Search..."
            maxlength=8
        />
    </label>
{% include select.md label="Sort" name="sort" items=site.data.sort_methods exclude_any=true %}
{% include select.md label="Platform" name="platform" items=site.data.platforms %}
{% include select.md label="Tags" name="tags" multiple=true items=tags %}
{% include select.md label="Tools" name="tools" multiple=true items=tools %}
{% include select.md label="Roles" name="roles" multiple=true items=roles %}
</fieldset>
<script src="/scripts/search_params.js"></script>
</form>

<ul class="game-list">
{%- for game_page in game_pages %}
    {%- 
        assign game_info = site.data.game_data
        | where: "title", game_page.title | first
    -%}
    {%- assign cover_src = game_info.cover_url -%}
    {%- if game_page.cover_override -%}
        {%- assign cover_src = game_page.cover_override -%}
    {%- endif -%}
    <li>
        <a href="{{game_page.url}}" class="game-tile">
            <img src="{{cover_src}}" alt="capsule image" />
            <h2>{{game_page.title}}</h2>
        </a>
    </li>
{%- endfor %}
</ul>